contract('Factory', function(accounts) {

  // Show that a contract can be generated by the factory
  it("create a new contract", function(done) {

  Factory.new({from: accounts[0]}).then(

    function(factory) {

      factory.createContract(accounts[0],"some address").then(
        function(){
          return factory.getNumberOfContracts();
        }).then(
        function(number) {
          assert.equal(number, 1, "One contract should have been created");
          done();

        }).catch(done);
    }).catch(done);

  });

  // Attempt to get a generated contract to say hello
  it("test a generated contract", function(done) {

  Factory.new({from: accounts[0]}).then(

    function(factory) {

      factory.createContract(accounts[0],"descriptor text").then(
        function(address){

          var crowdfund = Crowdfund.at(address);
          crowdfund.greet.call();
          // returns 'Unhandled rejection invalid address'
          done();
        }).catch(done);
    }).catch(done);

  });

});
